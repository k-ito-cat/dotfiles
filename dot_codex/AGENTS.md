- 返答は日本語。
- 指示されたファイルや用語が見当たらない場合は、大小文字の違い・タイポ・名前の勘違いを疑って探索してから報告する。
- push/pull などの Git 操作や破壊的な操作は、明示的な指示があるまで行わない。

## コミット規約
### 対象になる変更
- ファイル分割、ディレクトリ移動、リネーム
- import の整理、設定ファイルの整理、定義位置の移動
- フォーマット適用、リンタの自動修正
- 実行結果が同じままの置換や整形

### 禁止
- 機能追加、仕様変更、挙動変更、バグ修正を混ぜない
- ついでのロジック改善や最適化をしない

### コミットメッセージ方針
- コミットメッセージは実装内容の直接的な言語化ではなく、実装意図や背景などの「なぜ」を書く
- コミットメッセージは日本語で書く
- type は refactor または chore を使う
- scope に convert を入れて、機械的な移行だと分かるようにする
- 件名に「挙動変更なし」を含めて意図を固定する

### コミットメッセージ例
- refactor(convert): nvim設定を分割、挙動変更なし
- chore(convert): zsh設定を~/.config/zshへ移動、挙動変更なし
- refactor(convert): 命名を統一、挙動変更なし

### 運用ルール
- できるだけ小さくコミットする
- 大きい変更は段階的に分ける
  - 移動だけ
  - 参照更新だけ
  - 整形だけ
- 変換後にテストやビルドが通る状態を必ず作る
- 差分が機械的になる順序で作業する
  - 先に移動や分割をする
  - 次に参照やimportを直す
  - ロジックは最後まで触らない

### 例外
- どうしても混ざる場合は、理由と影響範囲をコミット本文に書く
- 迷ったら分離する

## 変更前の確認
- リポジトリのREADME, package.jsonの既存スクリプトを見て、既に導入されている作法に合わせる。

## 実行すべきコマンド
- 変更後は、可能な範囲で以下を実行して結果を確認する（存在しない場合は無理に追加しない）。
  - フォーマット: `npm run format`
  - リント: `npm run lint`
  - テスト: `npm run test`

## 変更が大きい場合の追加確認
- 実装が複雑、影響範囲が広い、依存やビルド周りに触れた場合は、`npm run build`も実行して確認する。

## MCP
- Notion MCPを使う操作は、実行前に毎回ユーザーへ確認し、明示的な `yes` / `OK` がある場合のみ実行する。
- Notionのページ本文を更新する前に、`notion://docs/enhanced-markdown-spec` を確認し、対象ブロック（特に `columns`）の書式要件を先に確定する。
- `notion-update-page` は `data` を文字列ではなくオブジェクトで渡す。
- `columns` 内の本文更新では、列内要素のインデント（タブ）を維持した形式で更新する。
- 原文がメンション形式（例: `<mention-date .../>`）の場合、更新後もメンション形式を維持する。文字列日付へは変換しない。
- 大きな本文更新は一括反映しない。まず最小差分で反映テストし、`fetch` で崩れがないことを確認してから全量反映する。
- 本文更新の直後は必ず `fetch` で反映結果を確認し、欠落や崩れがあれば即座に段階的にリカバリする。
